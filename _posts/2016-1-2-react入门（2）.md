---
title: react入门 （1）
---

#### ReactDOM.render()
> ReactDOM.render() 是react的基本用法，是将模板语言转换成html语言，并插入指定的dom节点。

{% highlight javascript %}
  ReactDOM.render(
    <h1>hello world!</h1>,
    document.getElementById('example')
  )
{% endhighlight %}
上面代码将一个 h1 标题，插入 example 节点（查看 react-demos edemo01）

#### JSX语法
 HTML语言直接写在js语言中，不加任何引号，这就是jsx的语法，它允许HTML与JavaScript的混写。
 {% highlight javascript %}
 var names=['嘎嘎','呱呱','吉吉'];
 ReactDOM.render(
 <div>
 {
    names.map(function(name){
    return <div>hello {name}</div>
    })
 }
 </div>,
 document.getElementById('example')
 );
 {% endhighlight %}

上面代码体现了jsx基本语法规则：遇到html标签，就用html规则解析；遇到代码块以{开头，就用JavaScript规则解析。

jsx允许直接在模板插入JavaScript变量。如果这个变量是一个数组，则会展开这个数组所有成员。
{% highlight javascript %}
 var names=['嘎嘎','呱呱','吉吉'];
 ReactDOM.render(
 <div>{names}
 </div>,
 document.getElementById('example')
 );
 {% endhighlight %}

 上面的代码names 变量是个数组，结果jsx会把所有成员添加到模板。

 #### 组件
 >React 允许将代码封装成组件（component），然后像插入普通HTML标签一样，在网页中插入这个组件。React.createClass 方法就用于生成一个组件类。

{% highlight javascript %}
 var HelloMessage=React.createClass({
  render: function(){
  return <h1>hello {this.props.name}</h1>;
  }
 });
 ReactDOM.render(
 <HelloMessage name="hehe" />,
 document.getElementById('example')
 );

{% endhighlight %}
上面的代码中，变量HelloMessage 就是一个组件类。模板插入<HelloMessage />时，会自动生成HelloMessage 的一个实例。所有的组件类都必须有

自己的render 方法，用于输出组件。

>注意！组件类的第一个字母必须大写，否则会报错，比如HelloMessage 不能写成helloMessage。另外，组件类只能包含一个顶层标签，否则也会报错。

{% highlight javascript %}
 var HelloMessage = React.createClass({
   render: function() {
     return <h1>
       Hello {this.props.name}
     </h1><p>
       some text
     </p>;
   }
 });

{% endhighlight %}

上面代码会报错，因为HelloMessage组件包含了两个顶层标签：h1和p。
组件的用法与原生的 HTML 标签完全一致，可以任意加入属性，比如 <HelloMessage name="John"> ，就是 HelloMessage 组件加入一个 name 属性，值为 John。组件的属性可以在组件类的 this.props 对象上获取，比如 name 属性就可以通过 this.props.name 读取

添加组件属性，有一个地方需要注意，就是 class 属性需要写成 className ，for 属性需要写成 htmlFor ，这是因为 class 和 for 是 JavaScript 的保留字。


#### this.props.children
>this.props 对象的属性与组件的属性一一对应，但是一个例外，就是this.props.children 属性，它表示组件的所有子节点。

{% highlight javascript %}
var NotesList=React.createClass({
render:function(){
return (
    <ol>
    {
    React.Children.map(this.props.children,function(child){
    return <li>{child}</li>;

    })
    }
    </ol>

);


}

});
ReactDOM.render(
   <NotesList>
   <span>i</span>
   <span>love</span>
   <span>you</span>
   </NotesList>,
   document.body
);
{% endhighlight %}
上面代码的 NotesList 组件有三个span 子节点，他们都可以通过 this.props.children 读取。

>这里需要注意，this.props.children 的值有三种可能：当前组件没有子节点 他就是 undefind;如果有一个子节点，数据类型是object;如果有多个子节点数据类型就是 array 。所以 处理this.props.children 的时候要小心。

React 提供一个工具方法 React.Children 来处理 this.props.children 。我们可以用 React.Children.map 来遍历子节点，而不用担心 this.props.children 的数据类型是 undefined 还是object。


#### PropTypes
>组件的属性可以接受任意值，字符串，对象，函数等等都可以。有时有时，我们需要一种机制，验证别人使用组件时，提供的参数是否符合要求。

组件类的 PropTypes属性，就是用来验证组件实例的属性是否符合要求

{% highlight javascript %}
var MyTitle=React.createClass({
propTypes:{
  title:React.PropTypes.string.isRequired,
},
render:function(){
 return <h1> {this.props.title} </h1>;
}
});
{% endhighlight %}

上面的MyTitle组件有一个title 属性。PropTypes 告诉React,这个 title 属性是必须的，而且它的值必须是字符串。现在我们设置 title
为一个数值。

{% highlight javascript %}
var data=123;
ReactDOM.render(
<MyTitle title={data}/>,
document.body
);
{% endhighlight %}



